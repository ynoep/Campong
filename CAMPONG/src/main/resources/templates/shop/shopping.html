<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<th:block th:replace="~{common/layout :: head}"></th:block>
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/shopping.css}">
</head>

<body>
	<header th:replace="~{common/layout :: #header}"></header>

	<main>
		<!-- ======================문구 있는 헤더 -->
		<section class="bih-s-1 position-relative"
			style="background-image: url(/assets/images/header/7.png); background-position: center; background-size: cover;">
			<!-- Background dark overlay -->
			<div class="bg-overlay bg-dark opacity-3"></div>
			<div class="container z-index-9 position-relative">
				<div class="row py-sm-7">
					<!-- Title -->
					<div class="col-xl-8 m-auto my-7 text-center">
						<h3 class="text-white mb-0">
							캠핑 필수 아이템, <br>캠퐁에서 손쉽게 찾아보세요
						</h3>
					</div>
				</div>
			</div>
		</section>
		<!-- =======================문구 있는 헤더 끝 -->

		<section class="pt-5 pb-4">
			<div class="container position-relative">
				<!-- 검색 필터 -->
				<!-- Collapse body START -->
				<div class="searchfilter">
					<div class="card card-body bg-light p-4 mt-4 mb-5 z-index-9">
						<!-- Form START -->
						<form class="row g-4" id="form-reset">
							<!-- Input item -->
							<div class="col-md-6 col-lg-4 me-3">
								<div class="form-control-borderless">
									<label class="form-label pb-2">검색하기</label>
									<div class="position-relative">
										<div class="fas fa-search position-absolute mt-3 ms-3"></div>
										<input type="text" class="form-control form-control-lg ps-5"
											placeholder="검색어를 입력하세요" id="searchValue" name="searchValue"
											th:value="${param.searchValue}">
									</div>

								</div>
							</div>

							<!-- 가격 슬라이더 -->
							<div class="col-md-6 col-lg-5 ms-9">
								<div class="form-control-borderless">
									<label class="form-label pb-2">가격대</label>
									<div class="position-relative">
										<div class="noui-wrapper">
											<div class="d-flex justify-content-between">
												<input type="text" class="text-black input-with-range-min"
													value="${paramMap.lPrice}">
												<input type="text" class="text-black input-with-range-max"
													value="${paramMap.hPrice}">
											</div>
											<div class="noui-slider-range mt-2" data-range-min='10000'
												data-range-max='1000000' data-range-selected-min='20000'
												data-range-selected-max='200000' id="slider"></div>
										</div>
									</div>
								</div>
							</div>

							<!-- 캠핑용품 필터 -->
							<div class="col-md-6 col-lg-6">
								<div class="col-12">
									<div class="form-control-borderless">
										<label class="form-label pb-2">캠핑 용품</label>
										<div class="row g-2">
											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="텐트"
														th:checked="${#arrays.contains(Item, '텐트')  ? 'checked' : null}"
														name="Item" id="Item1"> <label
														class="form-check-label h6 mb-0" for="Item1"> 텐트 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox"
														value="취사용품"
														th:checked="${#arrays.contains(Item, '취사용품')  ? 'checked' : null}"
														name="Item" id="Item2"> <label
														class="form-check-label h6 mb-0" for="Item2"> 취사용품
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox"
														value="캠핑가구"
														th:checked="${#arrays.contains(Item, '캠핑가구')  ? 'checked' : null}"
														name="Item" id="Item3"> <label
														class="form-check-label h6 mb-0" for="Item3"> 캠핑가구
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox"
														value="캠핑매트"
														th:checked="${#arrays.contains(Item, '캠핑매트')  ? 'checked' : null}"
														name="Item" id="Item4"> <label
														class="form-check-label h6 mb-0" for="Item4"> 캠핑매트
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox"
														value="아이스박스"
														th:checked="${#arrays.contains(Item, '아이스박스')  ? 'checked' : null}"
														name="Item" id="Item5"> <label
														class="form-check-label h6 mb-0" for="Item5">
														아이스박스 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="침낭"
														th:checked="${#arrays.contains(Item, '침낭')  ? 'checked' : null}"
														name="Item" id="Item6"> <label
														class="form-check-label h6 mb-0" for="Item6"> 침낭 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="천막"
														th:checked="${#arrays.contains(Item, '천막')  ? 'checked' : null}"
														name="Item" id="Item7"> <label
														class="form-check-label h6 mb-0" for="Item7"> 천막 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox"
														value="캠핑왜건"
														th:checked="${#arrays.contains(Item, '캠핑왜건')  ? 'checked' : null}"
														name="Item" id="Item8"> <label
														class="form-check-label h6 mb-0" for="Item8"> 캠핑왜건
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox"
														value="텐트/타프용품"
														th:checked="${#arrays.contains(Item, '텐트/타프용품')  ? 'checked' : null}"
														name="Item" id="Item9"> <label
														class="form-check-label h6 mb-0" for="Item9"> 텐트용품
													</label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox"
														value="기타캠핑용품"
														th:checked="${#arrays.contains(Item, '기타캠핑용품')  ? 'checked' : null}"
														name="Item" id="Item10"> <label
														class="form-check-label h6 mb-0" for="Item10">
														기타용품 </label>
												</div>
											</div>

										</div>
										<!-- Row END -->
									</div>
								</div>
							</div>

							<!-- 브랜드 필터-->
							<div class="col-md-6 col-lg-6">
								<div class="col-12">
									<div class="form-control-borderless">
										<label class="form-label pb-2">브랜드</label> 
										<div class="row g-2">
											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="코베아"
														th:checked="${#arrays.contains(Brand, '코베아')  ? 'checked' : null}"
														name="Brand" id="Brand1"> 
													<label class="form-check-label h6 mb-0" for="Brand1"> 코베아 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="엘바운드"
														th:checked="${#arrays.contains(Brand, '엘바운드')  ? 'checked' : null}"
														name="Brand" id="Brand2"> 
													<label class="form-check-label h6 mb-0" for="Brand2"> 엘바운드 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="로티캠프"
														th:checked="${#arrays.contains(Brand, '로티캠프')  ? 'checked' : null}"
														name="Brand" id="Brand3"> 
													<label class="form-check-label h6 mb-0" for="Brand3"> 로티캠프 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="크레모아"
														th:checked="${#arrays.contains(Brand, '크레모아')  ? 'checked' : null}"
														name="Brand" id="Brand4"> 
													<label class="form-check-label h6 mb-0" for="Brand4"> 크레모아 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="브리즈문"
														th:checked="${#arrays.contains(Brand, '브리즈문')  ? 'checked' : null}"
														name="Brand" id="Brand5"> 
													<label class="form-check-label h6 mb-0" for="Brand5"> 브리즈문 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="씨투써밋"
														th:checked="${#arrays.contains(Brand, '씨투써밋')  ? 'checked' : null}"
														name="Brand" id="Brand6"> 
													<label class="form-check-label h6 mb-0" for="Brand6"> 씨투써밋 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="네이처하이크"
														th:checked="${#arrays.contains(Brand, '네이처하이크')  ? 'checked' : null}"
														name="Brand" id="Brand7"> 
													<label class="form-check-label h6 mb-0" for="Brand7"> 네이처하이크 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="캥거"
														th:checked="${#arrays.contains(Brand, '캥거')  ? 'checked' : null}"
														name="Brand" id="Brand8"> 
													<label class="form-check-label h6 mb-0" for="Brand8"> 캥거 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="카나모"
														th:checked="${#arrays.contains(Brand, '카나모')  ? 'checked' : null}"
														name="Brand" id="Brand9"> 
													<label class="form-check-label h6 mb-0" for="Brand9"> 카나모 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="헬리녹스"
														th:checked="${#arrays.contains(Brand, '헬리녹스')  ? 'checked' : null}"
														name="Brand" id="Brand10"> 
													<label class="form-check-label h6 mb-0" for="Brand10"> 헬리녹스 </label>
												</div>
											</div>

											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="LUAZ"
														th:checked="${#arrays.contains(Brand, 'LUAZ')  ? 'checked' : null}"
														name="Brand" id="Brand11"> 
													<label class="form-check-label h6 mb-0" for="Brand11"> 루아즈 </label>
												</div>
											</div>
											<!-- checkbox -->
											<div class="col-sm-6 col-md-4 col-lg-3 col-xl-3">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" value="other"
														th:checked="${#arrays.contains(OtherBrand, 'other')  ? 'checked' : null}"
														name="OtherBrand" id="Brand12"> 
													<label class="form-check-label h6 mb-0" for="Brand12"> 기타브랜드 </label>
												</div>
											</div>
											<!-- Row END -->
										</div>
									</div>
								</div>
							</div>

							<!-- Button -->
							<div class="text-end align-items-center">
								<button class="btn btn-link p-0 mb-0" id="reset" onclick="uncheck()">검색 초기화</button>
								<button class="btn btn-dar btn-apply mb-0 ms-3" onclick="movePage(pageUrl)">필터 적용</button>
							</div>
						</form>
						<!-- Form END -->
					</div>
				</div>
				<!-- Collapse body END -->

			</div>
		</section>
		<!-- ======================= Title and Tabs END -->
		<!-- ======================= 리스트 -->
		<section class="pt-0">
			<div class="container">
				<div class="row g-4">
					<th:block th:if="${list.size == 0}">
						<div>
							<h6>조회된 상품이 없습니다.</h6>
						</div>
					</th:block>

					<th:block th:if="${list.size != 0}">
						<th:block th:each="shop : ${list}">
							<!-- Card item START -->
							<div class="col-md-6 col-xl-4">
								<div class="card shadow pb-0 h-100">

									<!-- 이미지 -->
									<img th:src="@{${shop.image}}" class="rounded-2 h-100"
										alt="Card image" style="object-fit: cover;">

									<!-- Card body START -->
									<div class="card-body px-3 pb-0">
										<!-- Title -->
										<h5 class="card-title">
											<a th:href="@{(${shop.link})}">[[${shop.title}]]</a>
										</h5>
									</div>
									<!-- Card body END -->

									<!-- Card footer START-->
									<div class="card-footer pt-4">
										<!-- Price and Button -->
										<div class="d-sm-flex justify-content-sm-between align-items-center">
											<!-- Price -->
											<div class="d-flex align-items-center">
												<h5 class="fw-normal text-success mb-0 me-1">￦[[${shop.lprice}]]</h5>
											</div>
											<!-- Button -->
											<div class="mt-2 mt-sm-0">
												<!-- Rating and basket -->
												<div class="d-flex justify-content-between">
													<a th:href="@{/shop/shopping-basket}" class="h6 z-index-2">
													<i class="bi bi-bag-fill"></i></a>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							</th:block>
							</th:block>
							
					<!-- Card item END -->
				</div>

				<!-- 페이징 -->
				<div class="row">
					<div class="col-12">
						<nav class="mt-7 my-4 d-flex justify-content-center"
							aria-label="navigation">
							<ul
								class="pagination pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
								<!--이전 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link"
										th:onclick="|movePage('/shop/shopping?page=${pageInfo.prevPage}');|"
										tabindex="-1">
										<i class="fa-solid fa-angle-left"></i>
									</button>
								</li>
								<!-- 10개 페이지 -->
								<th:block
									th:each="num, status : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}">
									<th:block th:if="${status.current == pageInfo.currentPage}">
										<li class="page-item mb-0 active">
											<button class="page-link"
												th:onclick="|movePage('/shop/shopping?page=${status.current}');|"
												disabled>[[${status.current}]]</button>
										</li>
									</th:block>
									<th:block th:if="${status.current != pageInfo.currentPage}">
										<li class="page-item mb-0">
											<button class="page-link"
												th:onclick="|movePage('/shop/shopping?page=${status.current}');|">
												[[${status.current}]]</button>
										</li>
									</th:block>
								</th:block>
								<!-- 다음 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link"
										th:onclick="|movePage('/shop/shopping?page=${pageInfo.nextPage}');|">
										<i class="fa-solid fa-angle-right"></i>
									</button>
								</li>
							</ul>
						</nav>
					</div>
				</div>
			</div>
		</section>
	</main>

	<!-- **************** MAIN CONTENT END **************** -->

	<!-- Back to top -->
	<div class="back-top"></div>

	<footer th:replace="~{common/layout :: #footer}"></footer>

	<script type="text/javascript">
		function movePage(pageUrl) {
			var searchValue = document.getElementById("searchValue");	// 입력
			var searchTypes = document.getElementsByName("searchType");	// 체크
			var searchType = 'title';
			
			pageUrl = pageUrl +'&searchType=' + searchType + '&searchValue=' + searchValue.value;
			
			var Brands = document.getElementsByName('Brand');
			var Brand = 'Brand';
			
			var Items = document.getElementsByName('Item');
			var Item = 'Item';
			
			for(var i = 0; i < Items.length; i++){
				if(Items[i].checked == true){
					Item = '&Item=' + Items[i].value;
					pageUrl += Item;
				}
			}
			
			for(var i = 0; i < Brands.length; i++){
				if(Brands[i].checked == true){
					Brand = '&Brand=' + Brands[i].value;
					pageUrl += Brand;
				}
			}
			
			location.href = encodeURI(pageUrl);
		}
	</script>
	
	<!-- 검색 초기화 -->
	<script type="text/javascript">
	function uncheck(){
		$(':checkbox:checked').prop('checked',false);
		$("#searchValue").val("");
	};
	
	</script>
</body>

</html>